{% extends 'base.html' %}
{% from 'macros/forms.html' import render_field %}
{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

  .auth-viewport {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.18), rgba(236, 72, 153, 0.18));
    min-height: 100vh;
    display: flex;
    align-items: center;
  }

  .auth-hero-card {
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.22);
    box-shadow: 0 25px 60px -30px rgba(30, 64, 175, 0.45);
    border-radius: 1.75rem;
  }

  .auth-chip {
    border-radius: 9999px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .auth-instruction {
    border-left: 4px solid rgba(59, 130, 246, 0.5);
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(236, 72, 153, 0.12));
  }

  .btn-gradient {
    background: linear-gradient(135deg, #2563eb, #ec4899);
    border: none;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 30px -20px rgba(236, 72, 153, 0.65);
  }

  .auth-helper-card {
    backdrop-filter: blur(12px);
    background: rgba(59, 130, 246, 0.08);
    border-radius: 1rem;
    border: 1px solid rgba(59, 130, 246, 0.16);
  }

  @media (max-width: 575.98px) {
    .auth-hero-card {
      border-radius: 1rem;
      padding: 2.25rem !important;
    }
  }
</style>

<div>
  <div class="container">
    <div class="row justify-content-center">
      <div class="">
        <div class="auth-hero-card p-4 p-md-5 animate-fade-up">
          <div class="text-center mb-4">
            <span class="badge bg-primary-subtle text-primary-emphasis auth-chip px-3 py-2">Secure access</span>
            <h1 class="display-6 fw-bold mt-3">Reset your password</h1>
            <p class="text-muted mb-0">We use a one-time verification code to confirm it‚Äôs really you. The process takes less than a minute.</p>
          </div>

          <div class="alert auth-instruction border-0 shadow-sm" role="alert">
            <div class="d-flex gap-3 align-items-start">
              <span class="fs-4">üß≠</span>
              <div>
                <h2 class="h6 mb-1 fw-semibold">How this reset works</h2>
                <p class="mb-0 small">1) Enter your registered email. 2) Check your inbox for the verification code. 3) Follow the link in the email to set a new password.</p>
              </div>
            </div>
          </div>

          <form method="post" novalidate data-loading-form class="mt-4">
            {{ form.hidden_tag() }}
            <div class="mb-3">
              <label class="form-label d-flex justify-content-between align-items-center" for="{{ form.email.id }}">
                <span class="fw-semibold">Account email</span>
                <span class="badge bg-light text-dark" data-bs-toggle="tooltip" data-bs-placement="left" title="Use the email you normally sign in with">Need help?</span>
              </label>
              {{ render_field(form.email, icon='envelope-fill') }}
            </div>
            <button type="submit" class="btn btn-gradient w-100 btn-lg text-white d-flex align-items-center justify-content-center gap-2" data-loading-button>
              <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true" data-loading-spinner></span>
              <span data-loading-label>Send reset code</span>
            </button>
          </form>

          <div class="row g-3 mt-4">
            <div class="col-12 col-md-6">
              <div class="auth-helper-card p-3 h-100">
                <div class="d-flex gap-2">
                  <span class="fs-4">üìÆ</span>
                  <div>
                    <h3 class="h6 fw-semibold mb-1">Check spam folders</h3>
                    <p class="small mb-0">If the email doesn‚Äôt arrive in 2 minutes, look in spam or Promotions.</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="auth-helper-card p-3 h-100">
                <div class="d-flex gap-2">
                  <span class="fs-4">üõ°Ô∏è</span>
                  <div>
                    <h3 class="h6 fw-semibold mb-1">Still locked out?</h3>
                    <p class="small mb-0">Contact your Finvela admin or reach support for manual verification.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <p class="text-center text-muted mt-4 mb-0">
            Remembered your password? <a href="{{ url_for('expenseai_auth.login') }}">Back to sign in</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
