{% extends 'base.html' %}
{% from 'macros/forms.html' import render_field %}
{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

  .login-viewport {
    font-family: 'Inter', sans-serif;
    background: radial-gradient(circle at top left, rgba(59, 130, 246, 0.22), rgba(79, 70, 229, 0.18));
    min-height: 100vh;
    display: flex;
    align-items: center;
  }

  .login-card {
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.2);
    box-shadow: 0 25px 65px -35px rgba(30, 64, 175, 0.55);
    border-radius: 2rem;
  }

  .login-chip {
    border-radius: 9999px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .login-instruction {
    border-left: 4px solid rgba(79, 70, 229, 0.5);
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(147, 197, 253, 0.18));
  }

  .btn-gradient {
    background: linear-gradient(135deg, #2563eb, #7c3aed);
    border: none;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 40px -30px rgba(79, 70, 229, 0.65);
  }

  .login-helper {
    backdrop-filter: blur(12px);
    background: rgba(37, 99, 235, 0.08);
    border: 1px solid rgba(37, 99, 235, 0.16);
    border-radius: 1rem;
  }

  @media (max-width: 575.98px) {
    .login-card {
      border-radius: 1.25rem;
      padding: 2.25rem !important;
    }
  }
</style>

<div>
  <div class="container">
    <div class="row justify-content-center animate-fade-up">
      <div class="">
        <div class="login-card p-4 p-md-5">
          <div class="text-center mb-4">
            <span class="badge bg-primary-subtle text-primary-emphasis login-chip px-3 py-2">Secure sign-in</span>
            <h1 class="display-6 fw-bold mt-3">Welcome back</h1>
            <p class="text-muted mb-0">Access your Finvela dashboards and tools with your organizational credentials.</p>
          </div>

          <div class="alert login-instruction border-0 shadow-sm" role="alert">
            <div class="d-flex gap-3 align-items-start">
              <span class="fs-4">üß≠</span>
              <div>
                <h2 class="h6 mb-1 fw-semibold">Quick steps</h2>
                <p class="mb-0 small">1) Enter your registered email. 2) Add your password. 3) Toggle ‚ÄúStay signed in‚Äù if this is a trusted device. Forgot details? Use the link below.</p>
              </div>
            </div>
          </div>

          <form method="post" novalidate data-loading-form class="mt-4">
            {{ form.hidden_tag() }}
            {{ render_field(form.email, icon='envelope-fill') }}
            {{ render_field(form.password, icon='lock-fill') }}
            <div class="d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-3 mb-4">
              <div class="form-check form-switch m-0">
                {{ form.remember_me(class_='form-check-input') }}
                <label class="form-check-label" for="{{ form.remember_me.id }}">Stay signed in</label>
              </div>
              <a href="{{ url_for('expenseai_auth.forgot_password') }}" class="small text-decoration-none text-primary" data-bs-toggle="tooltip" data-bs-placement="left" title="Request a reset code in under a minute">Forgot password?</a>
            </div>
            <button type="submit" class="btn btn-gradient w-100 btn-lg text-white d-flex align-items-center justify-content-center gap-2" data-loading-button>
              <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true" data-loading-spinner></span>
              <span data-loading-label>Sign in</span>
            </button>
          </form>

          <div class="row g-3 mt-4">
            <div class="col-12 col-md-6">
              <div class="login-helper p-3 h-100">
                <div class="d-flex gap-2">
                  <span class="fs-4">üîê</span>
                  <div>
                    <h3 class="h6 fw-semibold mb-1">Need MFA help?</h3>
                    <p class="small mb-0">Use your authenticator app or ask your admin to reset multi-factor preferences.</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="login-helper p-3 h-100">
                <div class="d-flex gap-2">
                  <span class="fs-4">ü§ù</span>
                  <div>
                    <h3 class="h6 fw-semibold mb-1">New to Finvela?</h3>
                    <p class="small mb-0">Create an account or ask an administrator to invite you to your organization.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <p class="text-center text-muted mt-4 mb-0">Don‚Äôt have an account? <a href="{{ url_for('expenseai_auth.register') }}">Create one</a>.</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
